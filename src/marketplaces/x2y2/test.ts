import { Interface } from 'ethers';
import { x2y2ABI } from './x2y2-abi';
import util from 'util';
import { mapEvProfit } from './mappers/map-ev-profit';
import { mapEvInventory } from './mappers/map-ev-inventory';

const profitData =
  '0xd1c3371f5311dc59275fac08beb3821e049dc55794b6b61b42914360603afa05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000062012d6202b15a74228b6763fe3e75e318b5ec1900000000000000000000000000000000000000000000000002e952e4bb6de000';
const profitTopics = [
  '0xe2c49856b032c255ae7e325d18109bc4e22a2804e2e49a017ec0f59f19cd447b',
];

const inventoryData =
  '0x00000000000000000000000062012d6202b15a74228b6763fe3e75e318b5ec19000000000000000000000000afa39415869d48a68434ccf27d9312f6670cb23a00000000000000000000000000000000cf7aec80fbb20629bf907e8941a19435000000000000000000000000000000000000000000000000000014291fae3f9500000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000006529b481000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000026000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000314b3d2e423000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000003bdca51226202fc2a64211aa35a8d95d61c6ca9900000000000000000000000000000000000000000000000000000000000121a80000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000314b3d2e4230000d1c3371f5311dc59275fac08beb3821e049dc55794b6b61b42914360603afa05000000000000000000000000f849de01b080adc3a814fabe1e2087475cf2e35400000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000001388000000000000000000000000d823c605807cc5e6bd6fc0d7e4eea50d3e2d66cd000000000000000000000000000000000000000000000000000000000000c350000000000000000000000000ac84014b0d999e8e951b6cf3d1bafeff3560761f';

const inventoryTopics = [
  '0x3cbb63f144840e5b1b0a38a7c19211d2e89de4d7c5faf8b2d3c1776c302d1d33',
  '0xd1c3371f5311dc59275fac08beb3821e049dc55794b6b61b42914360603afa05',
];

export const x2y2Interface = new Interface(x2y2ABI);

const profitParsedLog = x2y2Interface.parseLog({
  data: profitData,
  topics: profitTopics,
});
const inventoryParsedLog = x2y2Interface.parseLog({
  data: inventoryData,
  topics: inventoryTopics,
});

if (profitParsedLog) {
  console.log(util.inspect(mapEvProfit(profitParsedLog), false, null, true));
}

if (inventoryParsedLog) {
  console.log(
    util.inspect(mapEvInventory(inventoryParsedLog), false, null, true)
  );
}
